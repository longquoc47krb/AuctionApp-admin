"use strict";(self.webpackChunkreact_admin_dashboard_tables_charts_calendar_kanban=self.webpackChunkreact_admin_dashboard_tables_charts_calendar_kanban||[]).push([[384],{1945:function(e,t,a){a.d(t,{Z:function(){return c},k:function(){return u}});var r=a(4165),n=a(5861),s=a(8404),i=a(7946),l={url:"/user/search",method:"GET",params:{size:1e3}},o=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Z)(l);case 3:return t=e.sent,e.abrupt("return",t.userList);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){return(0,s.a)(["findAllAccount"],o,{staleTime:0})},c={findAllAccount:o}},5384:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var r=a(4165),n=a(5861),s=a(9439),i=a(6106),l=a(914),o=a(2506),u=a(8825),c=a(2791),d=a(9434),m=a(7689),p=a(4021),h=a(1945),v=a(6889),f=a(6772),x=a.n(f);var g=a(6461),b=a(2808),w=a(4219),j=a(184);g.Z.Item,b.Z.Option;function q(e){var t=e.field,a=e.form,r=e.label,n=e.width,s=(e.type,e.onChange),i=e.disabled,l=t.value,u=t.onChange,c=t.onBlur,d=t.name,m=a.errors;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h1",{className:"text-primary text-xl font-semibold mb-4",children:r}),(0,j.jsx)(w.Z,{disabled:i,name:d,value:l,onBlur:c,status:m[d]?"error":"",onChange:function(e){var t=e.target.value;u({target:{value:t,name:d}}),s&&s(t)},style:{width:n},className:"p-[0.5rem] mb-4"}),(0,j.jsx)("p",{className:"error-message w-[100%]",children:(0,j.jsx)(o.Bc,{name:d})})]})}function N(e){var t=e.field,a=e.form,r=e.label,n=e.uppercase,s=e.onChange,i=t.value,l=t.onChange,u=t.onBlur,c=t.name,d=a.errors;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h1",{className:"text-primary text-xl font-semibold mb-4",children:r}),(0,j.jsx)(w.Z.Password,{name:c,value:i,onBlur:u,onChange:function(e){var t=e.target.value,a={target:{value:n?t.toUpperCase():t,name:c}};l(a),s&&s(t)},status:d[c]?"error":"",className:"p-[0.5rem] mb-4"}),(0,j.jsx)("p",{className:"error-message",children:(0,j.jsx)(o.Bc,{name:c})})]})}var Z=function(){return(0,j.jsxs)("div",{className:"lds-ellipsis",children:[(0,j.jsx)("div",{}),(0,j.jsx)("div",{}),(0,j.jsx)("div",{}),(0,j.jsx)("div",{})]})},y=a(7807),k=a(7577),S=(a(7427),a(2426)),_=a.n(S),R=a(3585).ZP.PATTERNS,A={email:p.string().required((0,u.t)("validate.email.required")).email((0,u.t)("validate.email.invalid")),name:p.string().required((0,u.t)("validate.name.required")).max(64,(0,u.t)("validate.name.max")),phone:p.string().phone("VN",(0,u.t)("validate.phone.error")).notRequired().nullable(),password:p.string().required((0,u.t)("validate.password")).matches(R.PASSWORD_PATTERN,{message:(0,u.t)("validate.password.notMatch")}).max(20,(0,u.t)("validate.password.max")).matches(R.PASSWORD_LETTER,{message:(0,u.t)("validate.password.letter")}).matches(R.PASSWORD_NUMBER,{message:"validate.password.number"}),confirmPassword:p.string().trim().oneOf([p.ref("password")],(0,u.t)("validate.confirmPassword.invalid")).required((0,u.t)("validate.password.required")).matches(R.PASSWORD_PATTERN,{message:(0,u.t)("validate.password.notMatch")}).max(20,(0,u.t)("validate.password.max")).matches(R.PASSWORD_LETTER,{message:(0,u.t)("validate.password.letter")}).matches(R.PASSWORD_NUMBER,{message:(0,u.t)("validate.password.number")}),otp:p.string().required((0,u.t)("validate.otp.required")).min(6,(0,u.t)("validate.otp.min")),categories:p.array().required((0,u.t)("validate.categories.required")).max(2,(0,u.t)("validate.categories.max")),startingDate:p.date().required("Required").min(_()(),"Min date is today").max(p.ref("endingDate"),"Max date is contract end"),endingDate:p.date().required("Required").when("startingDate",(function(e,t){return e&&t.min(e,"Min date is contract start")})),ticketList:p.array().of(p.object().shape({currency:p.string().required((0,u.t)("validate.ticket.currency.required")),price:p.number().required((0,u.t)("validate.ticket.price.required")),ticketName:p.string().required((0,u.t)("validate.ticket.name.required"))})).test("unique",(0,u.t)("validate.ticket.unique"),(function(e){var t=new Set;return!e.some((function(e){return t.size===t.add(e.ticketName).size}))}))},C=(h.Z.findUser,v.Z.login);var T=function(){var e=(0,c.useState)(!1),t=(0,s.Z)(e,2),a=t[0],h=t[1],v=(0,d.I0)(),f=(0,m.s0)(),g=(0,o.TA)({initialValues:{email:"",password:""},validationSchema:p.object().shape({email:A.email,password:A.password}),validateOnChange:!0,validateOnBlur:!0,onSubmit:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var a,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,h(!0),e.next=4,C({email:a,password:n});case 4:s=e.sent,console.log({response:s}),b(s.success),(0,k.UE)(s)&&h(!1),!0===s.success&&v((0,y.o4)(s.access_token));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),b=function(e){switch(e){case!1:return function(e){var t=e.title,a=e.text,r=e.callback;return x().fire({title:t,text:a,icon:"error",showConfirmButton:!1,timer:2e3}).then(r)}({title:(0,u.t)("popup.login.error"),text:(0,u.t)("popup.login.error")});case!0:return setTimeout((function(){f("/")}),5e3),function(e){var t=e.title,a=e.text,r=e.timer,n=void 0===r?3e3:r,s=e.callback;return x().fire({title:t,text:a,icon:"success",showConfirmButton:!1,timer:n}).then(s)}({title:(0,u.t)("popup.login.success"),text:(0,u.t)("popup.login.success")});default:return null}},w=g.handleSubmit;return(0,j.jsx)("div",{className:"flex justify-center items-center w-full h-screen bg-gray-400",children:(0,j.jsx)(o.Hy,{value:g,children:(0,j.jsxs)(o.l0,{className:"auth-form",onSubmit:w,children:[(0,j.jsx)(i.Z,{className:"leading-8",children:(0,j.jsx)("h1",{className:"auth-title mb-2",children:(0,u.t)("pages.login")})}),(0,j.jsx)(i.Z,{align:"middle",style:{height:"auto",display:"flex",alignContent:"center"},gutter:[0,8],children:(0,j.jsx)(l.Z,{flex:4,children:(0,j.jsx)(o.gN,{component:q,name:"email",label:"Email"})})}),(0,j.jsx)(i.Z,{align:"middle",style:{height:"auto",display:"flex",alignContent:"center"},gutter:[0,8],children:(0,j.jsx)(l.Z,{flex:4,children:(0,j.jsx)(o.gN,{component:N,name:"password",label:(0,u.t)("user.password")})})}),(0,j.jsx)(l.Z,{span:24,children:(0,j.jsx)("button",{className:"primary-button",type:"submit",children:a?(0,j.jsx)(Z,{}):(0,u.t)("pages.login")})})]})})})}}}]);
//# sourceMappingURL=384.fdf60a50.chunk.js.map