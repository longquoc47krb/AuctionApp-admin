"use strict";(self.webpackChunkreact_admin_dashboard_tables_charts_calendar_kanban=self.webpackChunkreact_admin_dashboard_tables_charts_calendar_kanban||[]).push([[144],{7560:function(e,t,a){a.d(t,{HQ:function(){return i},hE:function(){return s}});var r=a(6772),n=a.n(r);function s(e){var t=e.title,a=e.text,r=e.timer,s=void 0===r?3e3:r,i=e.callback;return n().fire({title:t,text:a,icon:"success",showConfirmButton:!1,timer:s}).then(i)}function i(e){var t=e.title,a=e.text,r=e.callback;return n().fire({title:t,text:a,icon:"error",showConfirmButton:!1,timer:2e3}).then(r)}},7144:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var r=a(4165),n=a(5861),s=a(9439),i=a(6106),l=a(914),d=a(2506),o=a(8825),c=a(2791),u=a(9434),m=a(7689),p=a(4021),h=a(1945),v=a(6889),g=a(7560),x=a(6461),f=a(2808),b=a(4219),w=a(184);x.Z.Item,f.Z.Option;function j(e){var t=e.field,a=e.form,r=e.label,n=e.width,s=(e.type,e.onChange),i=e.disabled,l=t.value,o=t.onChange,c=t.onBlur,u=t.name,m=a.errors;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h1",{className:"text-primary text-xl font-semibold mb-4",children:r}),(0,w.jsx)(b.Z,{disabled:i,name:u,value:l,onBlur:c,status:m[u]?"error":"",onChange:function(e){var t=e.target.value;o({target:{value:t,name:u}}),s&&s(t)},style:{width:n},className:"p-[0.5rem] mb-4"}),(0,w.jsx)("p",{className:"error-message w-[100%]",children:(0,w.jsx)(d.Bc,{name:u})})]})}function q(e){var t=e.field,a=e.form,r=e.label,n=e.uppercase,s=e.onChange,i=t.value,l=t.onChange,o=t.onBlur,c=t.name,u=a.errors;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h1",{className:"text-primary text-xl font-semibold mb-4",children:r}),(0,w.jsx)(b.Z.Password,{name:c,value:i,onBlur:o,onChange:function(e){var t=e.target.value,a={target:{value:n?t.toUpperCase():t,name:c}};l(a),s&&s(t)},status:u[c]?"error":"",className:"p-[0.5rem] mb-4"}),(0,w.jsx)("p",{className:"error-message",children:(0,w.jsx)(d.Bc,{name:c})})]})}var N=function(){return(0,w.jsxs)("div",{className:"lds-ellipsis",children:[(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{})]})},y=a(7807),S=a(7577),_=(a(7427),a(2426)),k=a.n(_),Z=a(3585).ZP.PATTERNS,R={email:p.string().required((0,o.t)("validate.email.required")).email((0,o.t)("validate.email.invalid")),name:p.string().required((0,o.t)("validate.name.required")).max(64,(0,o.t)("validate.name.max")),phone:p.string().phone("VN",(0,o.t)("validate.phone.error")).notRequired().nullable(),password:p.string().required((0,o.t)("validate.password")).matches(Z.PASSWORD_PATTERN,{message:(0,o.t)("validate.password.notMatch")}).max(20,(0,o.t)("validate.password.max")).matches(Z.PASSWORD_LETTER,{message:(0,o.t)("validate.password.letter")}).matches(Z.PASSWORD_NUMBER,{message:"validate.password.number"}),confirmPassword:p.string().trim().oneOf([p.ref("password")],(0,o.t)("validate.confirmPassword.invalid")).required((0,o.t)("validate.password.required")).matches(Z.PASSWORD_PATTERN,{message:(0,o.t)("validate.password.notMatch")}).max(20,(0,o.t)("validate.password.max")).matches(Z.PASSWORD_LETTER,{message:(0,o.t)("validate.password.letter")}).matches(Z.PASSWORD_NUMBER,{message:(0,o.t)("validate.password.number")}),otp:p.string().required((0,o.t)("validate.otp.required")).min(6,(0,o.t)("validate.otp.min")),categories:p.array().required((0,o.t)("validate.categories.required")).max(2,(0,o.t)("validate.categories.max")),startingDate:p.date().required("Required").min(k()(),"Min date is today").max(p.ref("endingDate"),"Max date is contract end"),endingDate:p.date().required("Required").when("startingDate",(function(e,t){return e&&t.min(e,"Min date is contract start")})),ticketList:p.array().of(p.object().shape({currency:p.string().required((0,o.t)("validate.ticket.currency.required")),price:p.number().required((0,o.t)("validate.ticket.price.required")),ticketName:p.string().required((0,o.t)("validate.ticket.name.required"))})).test("unique",(0,o.t)("validate.ticket.unique"),(function(e){var t=new Set;return!e.some((function(e){return t.size===t.add(e.ticketName).size}))}))},C=(h.ZP.findUser,v.Z.login);var P=function(){var e=(0,c.useState)(!1),t=(0,s.Z)(e,2),a=t[0],h=t[1],v=(0,u.I0)(),x=(0,m.s0)(),f=(0,d.TA)({initialValues:{email:"",password:""},validationSchema:p.object().shape({email:R.email,password:R.password}),validateOnChange:!0,validateOnBlur:!0,onSubmit:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var a,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,h(!0),e.next=4,C({email:a,password:n});case 4:s=e.sent,console.log({response:s}),b(s.success),(0,S.UE)(s)&&h(!1),!0===s.success&&v((0,y.o4)(s.access_token));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),b=function(e){switch(e){case!1:return(0,g.HQ)({title:(0,o.t)("popup.login.error"),text:(0,o.t)("popup.login.error")});case!0:return setTimeout((function(){x("/")}),5e3),(0,g.hE)({title:(0,o.t)("popup.login.success"),text:(0,o.t)("popup.login.success")});default:return null}},_=f.handleSubmit;return(0,w.jsx)("div",{className:"flex justify-center items-center w-full h-screen bg-gray-400",children:(0,w.jsx)(d.Hy,{value:f,children:(0,w.jsxs)(d.l0,{className:"auth-form",onSubmit:_,children:[(0,w.jsx)(i.Z,{className:"leading-8",children:(0,w.jsx)("h1",{className:"auth-title mb-2",children:(0,o.t)("pages.login")})}),(0,w.jsx)(i.Z,{align:"middle",style:{height:"auto",display:"flex",alignContent:"center"},gutter:[0,8],children:(0,w.jsx)(l.Z,{flex:4,children:(0,w.jsx)(d.gN,{component:j,name:"email",label:"Email"})})}),(0,w.jsx)(i.Z,{align:"middle",style:{height:"auto",display:"flex",alignContent:"center"},gutter:[0,8],children:(0,w.jsx)(l.Z,{flex:4,children:(0,w.jsx)(d.gN,{component:q,name:"password",label:(0,o.t)("user.password")})})}),(0,w.jsx)(l.Z,{span:24,children:(0,w.jsx)("button",{className:"primary-button",type:"submit",children:a?(0,w.jsx)(N,{}):(0,o.t)("pages.login")})})]})})})}}}]);
//# sourceMappingURL=144.ed8ba68a.chunk.js.map